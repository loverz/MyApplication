# /usr/local/cellar/apache-spark/2.4.0/libexec/logs/Shell基础

Linux命令解释器，linux系统给用户提供的使用界面。Shell为用户提供输入命令参数，得到结果的环境。

### echo 命令

- -e：支持反斜线控制的字符转换（具体参见表 1）
- -n：取消输出后行末的换行符号（内容输出后不换行）

```shell
echo [选项] [输出内容]
```

### shell 脚本格式及运行方式

```shell
#!/bin/bash
echo -e "helloworld"
```

第一行 #!/bin/bash

linux中#一般都是注释，必须以这个开头。

第二行为正文

##### 运行方式

* 可以直接给 .sh 文件赋予运行文件，然后执行
* 也可以通过bash命令调用 .sh文件执行 bash ***.sh

### history 命令：查看历史命令

可以用来查看shell命令历史，可以用来查证历史问题

- -c：清空历史命令；
- -w：把缓存中的历史命令写入历史命令保存文件中。如果不手工指定历史命令保存文件，则放入默认历史命令保存文件 ~/.bash_history 中；

### bash命令自动补全

按tab键可以执行自动补全，path 路径中去查找命令

### alias 命令

alias vi='vim' #定义vim命令的别名是vi

### 常用快捷键

| 快捷键 | 作用                                                         |
| ------ | ------------------------------------------------------------ |
| ctrl+a | 光标快速到命令行开头                                         |
| ctrl+e | 到行尾                                                       |
| ctrl+c | 终止当前命令                                                 |
| ctrl+l | 清屏幕，相当于clear命令                                      |
| ctrl+u | 刪除或剪切光标之前的命令。假设输入了一行很长的命令，无须使用退格键一个一个字符地刪除， 使用这个快捷键会更加方便 |
| ctrl+k | 删除或者剪切光标后的命令                                     |
| ctrl+y | 粘贴上面剪切的命名                                           |
| ctrl+r | 历史命令搜索                                                 |
| ctrl+d | 退出当前终端                                                 |
| ctrl+z | 暂停                                                         |
| ctrl+s | 暂停屏幕输出                                                 |
| ctrl+q | 恢复屏幕输出                                                 |

### 多命令顺序执行

| 多命令连接符 | 格式           | 作用                                      |
| ------------ | -------------- | ----------------------------------------- |
| ;            | 命令1;命令2    | 多命令顺序执行，没有关联关系              |
| &&           | 命令1&&命令2   | 命令1执行正确，命令2才会执行；否则不执行  |
| \|\|         | 命令1\|\|命令2 | 命令1 执行错误，命令2才会执行；否则不执行 |

### grep 命令详解

提取符合条件字符串行

- -A 数字：列出符合条件的行，并列出后续的 n 行；
- -B 数字：列出符合条件的行，并列出前面的 n 行；
- -c：统计找到的符合条件的字符串的次数；
- -i：忽略大小写；
- -n：输出行号；
- -v：反向査找；
- --color=auto：搜索出的关键字用颜色显示；

```shell
grep [选项] “搜索文本” 文件名
grep -A 3 "root" /etc/passwd ## 再passwd文件中遍历包含root的行，并且输出三行
```

### find 与 grep命令

find命令用来搜索文件，且完全匹配，如果需要模糊需要用正则，通配符来匹配

grep为包含匹配，搜索文件内容，文件中内容行是否包含目标字符串

### | 管道符

格式为  命令1 | 命令2 即，将命令1的输出作为命令2的输入。命令1必须有正确输出，且命令2又有能处理输出的能力。

```shell
ll -a /etc/ | more #由于etc文件目录下文件数量过多，一般都需要调用more来分屏显示，这个方法比较方便查看所有文件
netstat -an | grep "ESTABLISHED" # 查询所有网络连接然后，查询网络中提取 established的行
netstat -an | grep "ESTABLISHED" | wc -l # 统计行数

```

### 通配符

| 通配符 | 作 用                                                        |
| ------ | ------------------------------------------------------------ |
| ?      | 匹配一个任意字符                                             |
| *      | 匹配 0 个或任意多个任意字符，也就是可以匹配任何内容          |
| []     | 匹配中括号中任意一个字符。例如，[abc] 代表一定匹配一个字符，或者是 a,或者是 b,或 者是 c |
| [-]    | 匹配中括号中任意一个字符，- 代表一个范围。例如，[a-z] 代表匹配一个小写字母 |
| [^]    | 逻辑非，表示匹配不是中括号内的一个字符。例如，\[^0-9\]代表匹配一个不是数字的字符 |

### 单引号、反引号、双引号

单引号和双引号用于变量值出现空格时，比如 name=zhang san 这样执行就会出现问题，而必须用引号括起来，比如 name="zhang san"。

不过，引号有单引号和双引号之分，二者的主要区别在于，被单引号括起来的字符都是普通字符，就算特殊字符也不再有特殊含义；而被双引号括起来的字符中

* "$" 表示引用变量的值
* 反引号 ` 表示引用命令

### 小括号、大括号区别

##### 父子shell

可以在终端执行bash，开启子shell。类似windows中开启cmd终端，同一个操作系统，新增一个操作界面。

- () 执行一串命令时，需要重新开启一个子 Shell 来执行。
- {} 执行一串命令时，在当前 Shell 中执行。
- () 和 {} 都是把一串命令放田括号里面，并且命令之间用";"隔开。
- () 最后一条命令可以不用分号。
- {} 最后一条命令要用分号。
- {} 的第一条命令和左括号之间必须有一个空格。
- () 里的各命令不必和括号有空格。
- () 和 {} 中括号里面的某条命令的重定向只影响该命令，但括号外的重定向则会影响到括号里的所有命令。

### shell变量

命名格式要求，数字，字母下划线，不能以数字开头。

##### set命令

- -u：如果设定此选项，则在调用未声明的变量时会报错（默认无任何提示）；
- -x：如果设定此选项，则在命令执行之前会先把命令输出一次；

##### unset 命令

unset 某变量名

##### 环境变量设置

export 变量名

### read 命令

接受键盘或者其他文件描述符的输入

```shell
read -t 30 -p "please input your name:" name #提示"请输入姓名"并等待30秒，把用户的输入保存到变量name中
echo "your name is $name"
```

### source 强制生效配置文件

用来修改了配置文件， 又不想要重启或者注销系统来使对应的配置文件生效的方式

* source 配置文件

